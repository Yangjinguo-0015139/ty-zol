class Registor{constructor(){this.$person=$(".person"),this.$enterprise=$(".enterprise"),this.$inps=$("input"),this.$get=$(".get-message"),this.$div=$(".message-content"),this.arr=[!1,!1,!1,!1],this.$float=$(".float"),this.$mark=$(".mark"),this.$disc=$(".disc"),this.addEvent()}addEvent(){let e=this;this.$get.click(function(){var s=e.$inps.eq(0).val();if(/^(13|14|15|16|17|18|19)\d{9}$/.test(s)){e.arr[0]=!0,e.$div.empty();let t="";for(let s=0;s<6;s++)t+=$.randInt(0,9);e.$div.append(t),e.$float.css({display:"block",height:$(document).height(),zIndex:995}),e.$mark.css({display:"block",zIndex:996}),$("body").css({overflow:"hidden"}),$(".disc").drag()}else $(".error").html("手机格式不正确")}),this.$inps.eq(0).focus(function(){$(this).next().html("")}),this.$inps.eq(1).focus(function(){$(this).next().html("")}),this.$inps.eq(2).focus(function(){$(this).next().html("")}),this.$inps.eq(3).focus(function(){$(this).next().html("")}),this.$inps.eq(1).blur(function(){$(this).val()==e.$div.html()?(e.arr[1]=!0,alert("验证码输入正确")):alert("验证码输入错误")}),this.$inps.eq(2).blur(function(){var s=$(this).val();/\w{8,20}/.test(s)?e.arr[2]=!0:$(".apssword").html("请设置8-20位包含数字，大小写字母和特殊字符的密码")}),this.$inps.eq(2).val()&&this.$inps.eq(3).blur(function(){$(this).val()==e.$inps.eq(2).val()?e.arr[3]=!0:$(".apssword-aff").html("与上次输入密码不符")}),$(".account-sub").click(function(){if(-1===e.arr.indexOf(!1)){var t=$.cookie("user")?$.cookie("user"):"";let s=$.coverStrToObj(t);e.$inps.eq(0).val()in s?alert("该手机号已经被注册过"):s.user={uname:e.$inps.eq(0).val(),password:e.$inps.eq(2).val()},$.cookie("user",JSON.stringify(s))}}),this.$enterprise.click(function(){$(this).css({background:"#fc002d",color:"#fff"}),$(this).prev().css({background:"#fff",color:"#717171",border:"1px solid #717171"}),$(".post-progress").css({display:"block"})}),this.$person.click(function(){$(this).css({background:"#fc002d",color:"#fff"}),$(this).next().css({background:"#fff",color:"#717171",border:"1px solid #717171"}),$(".post-progress").css({display:"none"})})}}$.extend({randInt:function(s,t){return t<s&&([s,t]=[t,s]),Math.floor(Math.random()*(t-s+1)+s)},countdown:function(s){let t=s,e=setInterval(()=>(t--,0===t?($(".get-message").css({display:"block"}),$(".time-piece").css({display:"none"}),$(".message-content").empty(),void clearInterval(e)):void $(".time-piece").html($(`<span>(${t})s后可再次获取</span>`).html())),1e3)},coverStrToObj:function(s){return s?JSON.parse(s):{}}}),$.fn.extend({drag(){this.mouseenter(s=>(this.dis_x=s.pageX-this.offset().left,this.dis_y=s.pageY-this.offset().top,$(document).mousemove(s=>{let t=s.pageX-this.dis_x-420;t<=0?t=0:t>=$(".progress-bar").width()-this.width()&&(t=$(".progress-bar").width()-this.width()),$(".left-puzzle").css({left:t}),this.css({left:t}),110==t&&($(".float").css({display:"none",zIndex:0}),$(".mark").css({display:"none",zIndex:0}),$(".get-message").css({display:"none"}),$(".time-piece").css({display:"block"}),$.countdown(60),alert("图片验证成功"))}),$(document).mouseup(function(){$(this).off()}),!1))}}),new Registor;